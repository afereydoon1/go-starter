FROM golang:1.25.1-alpine

RUN apk add --no-cache bash

WORKDIR /app

ENV GOBIN=/usr/local/bin

RUN go install github.com/air-verse/air@latest

COPY go.mod go.sum ./
RUN go mod download

COPY . .
RUN ls -la /app

RUN adduser -D devuser
USER devuser

CMD ["air"]